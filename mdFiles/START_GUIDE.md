# å‰åç«¯è¿é€šæ“ä½œæŒ‡å—

## ğŸ“‹ å®Œæ•´æ“ä½œæ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–æ•°æ®åº“

#### 1.1 ç¡®ä¿ PostgreSQL æœåŠ¡è¿è¡Œ

```bash
# æ£€æŸ¥ PostgreSQL æ˜¯å¦è¿è¡Œ
brew services list | grep postgresql

# å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œå¯åŠ¨å®ƒ
brew services start postgresql@14
# æˆ–
brew services start postgresql
```

#### 1.2 åˆ›å»ºæ•°æ®åº“ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

```bash
# ä½¿ç”¨æ‚¨çš„ç”¨æˆ·ååˆ›å»ºæ•°æ®åº“
createdb nextjs_auth

# æˆ–è€…ä½¿ç”¨ postgres ç”¨æˆ·
createdb -U postgres nextjs_auth
```

#### 1.3 ç”Ÿæˆ Prisma Client

```bash
npm run db:generate
```

#### 1.4 æ¨é€æ•°æ®åº“ Schemaï¼ˆåˆ›å»ºè¡¨ç»“æ„ï¼‰

```bash
# æ–¹å¼1ï¼šå¿«é€Ÿæ¨é€ï¼ˆå¼€å‘ç¯å¢ƒæ¨èï¼‰
npm run db:push

# æ–¹å¼2ï¼šåˆ›å»ºè¿ç§»ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰
npm run db:migrate
```

**é¢„æœŸè¾“å‡º**ï¼š
```
âœ” Generated Prisma Client
âœ” Pushed to database
```

### ç¬¬äºŒæ­¥ï¼šå¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

**é¢„æœŸè¾“å‡º**ï¼š
```
â–² Next.js 16.1.4 (Turbopack)
- Local:        http://localhost:3000
- Network:      http://172.x.x.x:3000

âœ“ Ready in X seconds
```

### ç¬¬ä¸‰æ­¥ï¼šéªŒè¯å‰åç«¯è¿é€š

#### 3.1 è®¿é—®é¦–é¡µ

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:3000

åº”è¯¥èƒ½çœ‹åˆ°ï¼š
- âœ… é¡¹ç›®é¦–é¡µ
- âœ… "ç™»å½•"å’Œ"æ³¨å†Œ"æŒ‰é’®

#### 3.2 æµ‹è¯•æ³¨å†ŒåŠŸèƒ½

1. ç‚¹å‡»"æ³¨å†Œ"æŒ‰é’®
2. å¡«å†™æ³¨å†Œä¿¡æ¯ï¼š
   - é‚®ç®±ï¼š`test@example.com`
   - å¯†ç ï¼š`Test1234`ï¼ˆè‡³å°‘8ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—ï¼‰
   - ç¡®è®¤å¯†ç ï¼š`Test1234`
3. ç‚¹å‡»"æ³¨å†Œ"

**é¢„æœŸç»“æœ**ï¼š
- âœ… å¦‚æœé‚®ä»¶æœåŠ¡å·²é…ç½®ï¼šä¼šå‘é€éªŒè¯é‚®ä»¶
- âœ… å¦‚æœé‚®ä»¶æœåŠ¡æœªé…ç½®ï¼šä¼šåœ¨æ§åˆ¶å°æ˜¾ç¤ºéªŒè¯é“¾æ¥
- âœ… æ³¨å†ŒæˆåŠŸæç¤º

#### 3.3 æµ‹è¯•é‚®ç®±éªŒè¯

**å¦‚æœé‚®ä»¶æœåŠ¡å·²é…ç½®**ï¼š
- æŸ¥æ”¶é‚®ä»¶
- ç‚¹å‡»éªŒè¯é“¾æ¥

**å¦‚æœé‚®ä»¶æœåŠ¡æœªé…ç½®**ï¼š
- æŸ¥çœ‹ç»ˆç«¯æ§åˆ¶å°
- ä¼šæ˜¾ç¤ºç±»ä¼¼ï¼š`éªŒè¯é“¾æ¥: http://localhost:3000/verify-email?token=xxx`
- å¤åˆ¶é“¾æ¥åˆ°æµè§ˆå™¨æ‰“å¼€

#### 3.4 æµ‹è¯•ç™»å½•åŠŸèƒ½

1. è®¿é—®ï¼šhttp://localhost:3000/login
2. è¾“å…¥åˆšæ‰æ³¨å†Œçš„é‚®ç®±å’Œå¯†ç 
3. ç‚¹å‡»"ç™»å½•"

**é¢„æœŸç»“æœ**ï¼š
- âœ… ç™»å½•æˆåŠŸ
- âœ… è‡ªåŠ¨è·³è½¬åˆ° Dashboard
- âœ… æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯

#### 3.5 æµ‹è¯•ç™»å‡ºåŠŸèƒ½

1. åœ¨ Dashboard é¡µé¢
2. ç‚¹å‡»"ç™»å‡º"æŒ‰é’®

**é¢„æœŸç»“æœ**ï¼š
- âœ… ç™»å‡ºæˆåŠŸ
- âœ… è·³è½¬åˆ°é¦–é¡µ

### ç¬¬å››æ­¥ï¼šæ£€æŸ¥æ•°æ®åº“è¿æ¥

#### 4.1 ä½¿ç”¨ Prisma Studio æŸ¥çœ‹æ•°æ®

```bash
npm run db:studio
```

è¿™ä¼šæ‰“å¼€æµè§ˆå™¨ï¼šhttp://localhost:5555

æ‚¨å¯ä»¥ï¼š
- âœ… æŸ¥çœ‹æ‰€æœ‰è¡¨
- âœ… æŸ¥çœ‹ç”¨æˆ·æ•°æ®
- âœ… æŸ¥çœ‹ç™»å½•å°è¯•è®°å½•
- âœ… æŸ¥çœ‹éªŒè¯ Token

#### 4.2 ä½¿ç”¨ psql å‘½ä»¤è¡ŒæŸ¥çœ‹

```bash
psql -d nextjs_auth

# åœ¨ psql ä¸­æ‰§è¡Œ
\dt                    # æŸ¥çœ‹æ‰€æœ‰è¡¨
SELECT * FROM "User";  # æŸ¥çœ‹ç”¨æˆ·è¡¨
\q                     # é€€å‡º
```

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Error: Can't reach database server
```

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥ PostgreSQL æ˜¯å¦è¿è¡Œï¼š`brew services list`
2. æ£€æŸ¥ `.env.local` ä¸­çš„ `DATABASE_URL` æ˜¯å¦æ­£ç¡®
3. æµ‹è¯•è¿æ¥ï¼š`psql -d nextjs_auth`

### é—®é¢˜ 2ï¼šPrisma Client æœªç”Ÿæˆ

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Module not found: Can't resolve '@prisma/client'
```

**è§£å†³æ–¹æ³•**ï¼š
```bash
npm run db:generate
```

### é—®é¢˜ 3ï¼šè¡¨ç»“æ„æœªåˆ›å»º

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Table "User" does not exist
```

**è§£å†³æ–¹æ³•**ï¼š
```bash
npm run db:push
```

### é—®é¢˜ 4ï¼šNextAuth é”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š
```
[next-auth][error][NO_SECRET]
```

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥ `.env.local` ä¸­æ˜¯å¦æœ‰ `NEXTAUTH_SECRET`
2. å¼€å‘ç¯å¢ƒä¼šè‡ªåŠ¨ä½¿ç”¨é»˜è®¤å€¼ï¼Œä½†æœ€å¥½é…ç½®ä¸€ä¸ª

### é—®é¢˜ 5ï¼šç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Port 3000 is already in use
```

**è§£å†³æ–¹æ³•**ï¼š
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -ti:3000

# æ€æ­»è¿›ç¨‹
kill -9 $(lsof -ti:3000)

# æˆ–ä½¿ç”¨å…¶ä»–ç«¯å£
PORT=3001 npm run dev
```

## âœ… è¿é€šæ€§æ£€æŸ¥æ¸…å•

å®Œæˆä»¥ä¸‹æ£€æŸ¥ï¼Œç¡®ä¿å‰åç«¯å·²è¿é€šï¼š

- [ ] PostgreSQL æœåŠ¡æ­£åœ¨è¿è¡Œ
- [ ] æ•°æ®åº“ `nextjs_auth` å·²åˆ›å»º
- [ ] Prisma Client å·²ç”Ÿæˆï¼ˆ`npm run db:generate`ï¼‰
- [ ] æ•°æ®åº“è¡¨å·²åˆ›å»ºï¼ˆ`npm run db:push`ï¼‰
- [ ] å¼€å‘æœåŠ¡å™¨å·²å¯åŠ¨ï¼ˆ`npm run dev`ï¼‰
- [ ] å¯ä»¥è®¿é—® http://localhost:3000
- [ ] å¯ä»¥æˆåŠŸæ³¨å†Œæ–°ç”¨æˆ·
- [ ] å¯ä»¥æˆåŠŸç™»å½•
- [ ] å¯ä»¥è®¿é—® Dashboard
- [ ] å¯ä»¥æˆåŠŸç™»å‡º

## ğŸš€ å¿«é€Ÿå¯åŠ¨å‘½ä»¤ï¼ˆä¸€é”®æ‰§è¡Œï¼‰

```bash
# 1. ç”Ÿæˆ Prisma Client
npm run db:generate

# 2. æ¨é€æ•°æ®åº“ Schema
npm run db:push

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

## ğŸ“ å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘æœåŠ¡å™¨
npm run dev

# ç”Ÿæˆ Prisma Client
npm run db:generate

# æ¨é€æ•°æ®åº“ Schemaï¼ˆå¼€å‘ç¯å¢ƒï¼‰
npm run db:push

# åˆ›å»ºæ•°æ®åº“è¿ç§»ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
npm run db:migrate

# æ‰“å¼€ Prisma Studioï¼ˆæ•°æ®åº“å¯è§†åŒ–ï¼‰
npm run db:studio

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```

## ğŸ¯ ä¸‹ä¸€æ­¥

å‰åç«¯è¿é€šåï¼Œæ‚¨å¯ä»¥ï¼š

1. **æµ‹è¯•å®Œæ•´æµç¨‹**ï¼š
   - æ³¨å†Œ â†’ éªŒè¯é‚®ç®± â†’ ç™»å½• â†’ è®¿é—® Dashboard â†’ ç™»å‡º

2. **æŸ¥çœ‹æ•°æ®åº“**ï¼š
   - ä½¿ç”¨ `npm run db:studio` æŸ¥çœ‹æ•°æ®

3. **å¼€å‘æ–°åŠŸèƒ½**ï¼š
   - åœ¨ `app/` ç›®å½•æ·»åŠ æ–°é¡µé¢
   - åœ¨ `app/api/` ç›®å½•æ·»åŠ æ–° API

4. **è‡ªå®šä¹‰ UI**ï¼š
   - ä¿®æ”¹ `components/` ä¸­çš„ç»„ä»¶
   - è°ƒæ•´ Tailwind CSS æ ·å¼

